import{_ as T,r as n,e as _,f as S,c as u,a as t,w as m,v,d as D,F as M,l as B,t as g,i as U,q as C,s as b,n as y,x as N,A as q,B as E,o as i}from"./index-BmQksIZ3.js";const F={class:"submit-view"},L={key:0,class:"form-container glass-panel"},O={class:"form-group"},Q={class:"form-group"},Y={class:"form-group"},$={class:"form-group"},H={class:"clue-number"},I=["onUpdate:modelValue","placeholder"],j=["onClick"],K={key:1,class:"success-message glass-panel"},R={class:"date-info"},Z={__name:"SubmitView",setup(G){const d=n(""),p=n(""),r=n(""),a=n(["","","","",""]),f=n(!1),w=n({show:!1,message:"",type:""}),c=n(0),V=_(()=>{if(c.value===0)return"Tomorrow";const s=new Date,e=5.5*60*60*1e3,l=new Date(s.getTime()+e);return l.setDate(l.getDate()+c.value+1),l.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"Asia/Kolkata"})}),x=()=>{a.value.length<10&&a.value.push("")},A=s=>{a.value.length>3&&a.value.splice(s,1)},h=(s,e="error")=>{w.value={show:!0,message:s,type:e},setTimeout(()=>{w.value.show=!1},4e3)},z=async()=>{try{const s=C(b(y,"waitingPuzzles")),e=await N(s),l=C(b(y,"approvedPuzzles")),o=await N(l);c.value=e.size+o.size}catch(s){console.error("Error fetching queue:",s),c.value=0}};S(()=>{z()});const P=async()=>{if(!d.value||!r.value||a.value.some(s=>!s.trim())){h("Please fill in all fields","error");return}try{const s=p.value.split(",").map(e=>e.trim()).filter(e=>e.length>0);await q(b(y,"waitingPuzzles"),{movieName:d.value,alternateNames:s,submittedBy:r.value,clues:a.value,createdAt:E()}),f.value=!0,d.value="",p.value="",r.value="",a.value=["","","","",""]}catch(s){console.error("Error submitting puzzle:",s),h("Failed to submit puzzle. Please try again.","error")}};return(s,e)=>(i(),u("div",F,[e[12]||(e[12]=t("h1",{class:"title"},"Publish a Puzzle",-1)),f.value?(i(),u("div",K,[t("h2",null,"Thank You, "+g(r.value)+"!",1),e[10]||(e[10]=t("p",null,"Your puzzle has been submitted for review.",-1)),t("p",R,[e[9]||(e[9]=U("Estimated Publication Date: ",-1)),t("strong",null,g(V.value),1)]),e[11]||(e[11]=t("p",{class:"date-disclaimer"},"* Date might be sooner if queued puzzles are rejected",-1)),t("button",{onClick:e[3]||(e[3]=l=>{f.value=!1,z()}),class:"btn-secondary action-btn"}," ðŸ”„ Submit Another ")])):(i(),u("div",L,[t("div",O,[e[4]||(e[4]=t("label",null,"Your Username (for credit)",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),type:"text",class:"input-field",placeholder:"e.g. MovieBuff99"},null,512),[[v,r.value]])]),t("div",Q,[e[5]||(e[5]=t("label",null,"Movie Name",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),type:"text",class:"input-field",placeholder:"e.g. The Matrix"},null,512),[[v,d.value]])]),t("div",Y,[e[6]||(e[6]=t("label",null,"Alternative Titles (Optional)",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>p.value=l),type:"text",class:"input-field",placeholder:"e.g. Matrix, Matrix 1 (comma separated)"},null,512),[[v,p.value]]),e[7]||(e[7]=t("small",{class:"hint-text"},"Helps with spelling variations",-1))]),t("div",$,[e[8]||(e[8]=t("label",null,"Clues (Order: Hardest to Easiest)",-1)),(i(!0),u(M,null,B(a.value,(l,o)=>(i(),u("div",{key:o,class:"clue-input-group"},[t("span",H,"#"+g(o+1),1),m(t("input",{"onUpdate:modelValue":k=>a.value[o]=k,type:"text",class:"input-field",placeholder:`Clue #${o+1}`},null,8,I),[[v,a.value[o]]]),a.value.length>3?(i(),u("button",{key:0,onClick:k=>A(o),class:"btn-icon",title:"Remove clue"}," âœ• ",8,j)):D("",!0)]))),128)),a.value.length<10?(i(),u("button",{key:0,onClick:x,class:"btn-secondary small"}," âœ¨ Add Another Clue ")):D("",!0)]),t("button",{onClick:P,class:"btn-primary full-width"},"Submit for Approval")]))]))}},W=T(Z,[["__scopeId","data-v-21dd016e"]]);export{W as default};
