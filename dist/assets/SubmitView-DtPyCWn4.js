import{_ as V,r,e as N,f as q,c as o,n as S,a as t,p as x,d as f,s as A,t as m,T as P,w as g,v as b,F as B,u as E,k as M,q as U,g as z,h as k,i as F,j as L,x as Y,y as $,o as n}from"./index-DfSsWp_F.js";const j={class:"submit-view"},I={key:0,class:"form-container glass-panel"},O={class:"form-group"},H={class:"form-group"},K={class:"form-group"},Q={class:"clue-number"},R=["onUpdate:modelValue","placeholder"],Z=["onClick"],G={key:1,class:"success-message glass-panel"},J={class:"date-info"},W={__name:"SubmitView",setup(X){const d=r(""),u=r(""),a=r(["","","","",""]),p=r(!1),c=r({show:!1,message:"",type:""}),v=r(0),C=N(()=>{if(v.value===0)return"Tomorrow";const s=new Date,e=5.5*60*60*1e3,l=new Date(s.getTime()+e);return l.setDate(l.getDate()+v.value+1),l.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"Asia/Kolkata"})}),_=()=>{a.value.length<10&&a.value.push("")},D=s=>{a.value.length>3&&a.value.splice(s,1)},y=(s,e="error")=>{c.value={show:!0,message:s,type:e},setTimeout(()=>{c.value.show=!1},4e3)},h=async()=>{try{const s=U(z(k,"puzzles"),F("status","in",["approved","pending"])),e=await L(s);v.value=e.size}catch(s){console.error("Error fetching queue:",s),v.value=0}};q(()=>{h()});const T=async()=>{if(!d.value||!u.value||a.value.some(s=>!s.trim())){y("Please fill in all fields","error");return}try{await Y(z(k,"puzzles"),{movieName:d.value,submittedBy:u.value,clues:a.value,status:"pending",createdAt:$()}),p.value=!0,d.value="",u.value="",a.value=["","","","",""]}catch(s){console.error("Error submitting puzzle:",s),y("Failed to submit puzzle. Please try again.","error")}};return(s,e)=>(n(),o("div",j,[S(P,{name:"slide-down"},{default:x(()=>[c.value.show?(n(),o("div",{key:0,class:A(["notification",c.value.type])},m(c.value.message),3)):f("",!0)]),_:1}),e[9]||(e[9]=t("h1",{class:"title"},"Publish a Puzzle",-1)),p.value?(n(),o("div",G,[t("h2",null,"Thank You, "+m(u.value)+"!",1),e[7]||(e[7]=t("p",null,"Your puzzle has been submitted for review.",-1)),t("p",J,[e[6]||(e[6]=M("Estimated Publication Date: ",-1)),t("strong",null,m(C.value),1)]),e[8]||(e[8]=t("p",{class:"date-disclaimer"},"* Date might be sooner if queued puzzles are rejected",-1)),t("button",{onClick:e[2]||(e[2]=l=>{p.value=!1,h()}),class:"btn-secondary action-btn"}," ðŸ”„ Submit Another ")])):(n(),o("div",I,[t("div",O,[e[3]||(e[3]=t("label",null,"Your Username (for credit)",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),type:"text",class:"input-field",placeholder:"e.g. MovieBuff99"},null,512),[[b,u.value]])]),t("div",H,[e[4]||(e[4]=t("label",null,"Movie Name",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),type:"text",class:"input-field",placeholder:"e.g. The Matrix"},null,512),[[b,d.value]])]),t("div",K,[e[5]||(e[5]=t("label",null,"Clues (Order: Hardest to Easiest)",-1)),(n(!0),o(B,null,E(a.value,(l,i)=>(n(),o("div",{key:i,class:"clue-input-group"},[t("span",Q,"#"+m(i+1),1),g(t("input",{"onUpdate:modelValue":w=>a.value[i]=w,type:"text",class:"input-field",placeholder:`Clue #${i+1}`},null,8,R),[[b,a.value[i]]]),a.value.length>3?(n(),o("button",{key:0,onClick:w=>D(i),class:"btn-icon",title:"Remove clue"}," âœ• ",8,Z)):f("",!0)]))),128)),a.value.length<10?(n(),o("button",{key:0,onClick:_,class:"btn-secondary small"}," âœ¨ Add Another Clue ")):f("",!0)]),t("button",{onClick:T,class:"btn-primary full-width"},"Submit for Approval")]))]))}},te=V(W,[["__scopeId","data-v-a812aade"]]);export{te as default};
